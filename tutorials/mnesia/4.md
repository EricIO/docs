---
layout: mnesia-tutorial
guide: 4
total_guides: 5
---
# Tutorial: Mnesia

## 4 Content

### 4.1 Inserting Data

We've created tables and we know how to inspect their metadata; now let's give
them *data*. Again, from the REPL, we'll pull in our source code:

```cl
> (slurp '"src/content")
#(ok content)
>
```

We'll start by inserting a few departments One of the functions now available
to us in the REPL is ``insert-departments``. It is defined like so:

```cl
(defun insert-departments
  (('())
   'ok)
  (((cons (list id name) tail))
   (let ((department (make-department id id name name)))
     (mnesia:transaction (lambda () (mnesia:write department)))
     (insert-departments tail))))
```

Which means that we can create a simple list of lists that it will iterate
over and insert for us. Let's try it. Here's our list of departments:

```cl

> (set depts '((B/SF "Open Telecom Platform")
               (B/SFP "OTP - Product Development")
               (B/SFR "Computer Science Laboratory")))
>
```

Let's do the insert:

```cl
> (insert-departments depts)
ok
```

To make sure that everything is where we planned, we can use ``mnesia:foldl``:

```cl
> (mnesia:transaction
    (lambda ()
      (mnesia:foldl (lambda (x _) (lfe_io:format '"~p~n" (list x)))
                    0
                    'department)))
#(department B/SFP "OTP - Product Development")
#(department B/SFR "Computer Science Laboratory")
#(department B/SF "Open Telecom Platform")
#(atomic ok)
>
```

And then some projects:

```cl
```


### 4.2 Building Relationships
